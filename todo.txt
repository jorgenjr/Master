
ABEL COMMANDS:
sbatch <file.slurm>
watch -n 2 squeue -u jorgenjr
scancel <job id>



FILE STRUCTURE:
Abbas:
- Abbas_HUGO (lsfit, simulation -> HUGO)
- Abbas_result (lsfit, simulation (probes))
- Abbas_result_tumor (lsfit, simulation (probes) with tumor cell line in signature matrix)
- LLSR_HUGO (lm, ran with simulation/HUGO_tumor)

analyze_result:
PICTURES:
- CIBERSORT_heatmap_probes_newnorm_20x20.png (probes, new Q-norm, tumor cell not in 'signature matrix')
- LLSR_heatmap_probes_allgenes_20x20.png (probes, new Q-norm, tumor cell not in 'combined cells', correlation calcuated with combined cells)
- LLSR_heatmap_probes_newnorm_20x20.png (probes, new Q-norm, tumor cell not in 'combined cells', correlation calculated with signature matrix)
- Raji_probes_A.png (probes, 70% tumor, tumor cell included, new Q-norm)
- Raji_probes_B.png (probes, 70% tumor, tumor cell included, new Q-norm)
- Raji_probes_C.png (probes, 70% tumor, tumor cell included, new Q-norm)
- Raji_probes_D.png (probes, 70% tumor, tumor cell included, new Q-norm)
- T-high_T-low_probes_new_norm_notumor_A.png (probes, no tumor, new Q-norm)
- T-high_T-low_probes_new_norm_notumor_B.png (probes, no tumor, new Q-norm)
- T-high_T-low_probes_new_norm_notumor_C.png (probes, no tumor, new Q-norm)
- T-high_T-low_probes_new_norm_notumor_D.png (probes, no tumor, new Q-norm)
- T-high_probes_notumor_A.png (probes, no tumor, new Q-norm)
- T-high_probes_notumor_B.png (probes, no tumor, new Q-norm)
- T-high_probes_notumor_C.png (probes, no tumor, new Q-norm)
- T-high_probes_notumor_D.png (probes, no tumor, new Q-norm)

- mixA_notumor.png (probes, no tumor, new Q-norm)
- mixA_referencenorm.png (probes, no tumor, Q-norm reference matrix, new Q-norm, mixture without Q-norm with tumor)
- mixB_notumor.png (probes, no tumor, new Q-norm)
- mixB_referencenorm.png (probes, no tumor, Q-norm reference matrix, new Q-norm, mixture without Q-norm with tumor)
- mixC_notumor.png (probes, no tumor, new Q-norm)
- mixC_referencenorm.png (probes, no tumor, Q-norm reference matrix, new Q-norm, mixture without Q-norm with tumor)
- mixD_notumor.png (probes, no tumor, new Q-norm)
- mixD_referencenorm.png (probes, no tumor, Q-norm reference matrix, new Q-norm, mixture without Q-norm with tumor)



convert:
- simulation_hugo_unique_tumor (simulation -> HUGO)

output:
- CIBERSORT_HUGOfirst_tumor (HUGO -> simulation, ran with HUGO_tumor)
- CIBERSORT_randomsignatureQ_tumor (running CIBERSORT with random signature genes (quantile normalized), ran with HUGO_tumor mixture)
- CIBERSORT_randomsignature_tumor (running CIBERSORT with random signature genes, ran with HUGO_tumor mixture)
- CIBERSORT_result (simulation -> HUGO, ran with convert/simulation_hugo_unique_tumor mixture)
- CIBERSORT_result_tumor (simulation -> HUGO, ran with convert/simulation_hugo_unique_tumor mixture and signature matrix with tumor cell line)

simulation:
- HUGO_signaturegenes (only genes in ???/221_signature)
- HUGO_tumor (mixture -> HUGO -> simulation?)
- mixtures_with_tumor (simulation with probes)



PROGRAMMING
- Summarize all probe set values before Quantile Normalize -> Abbas
- Check normal distribution etc.

TEXT
- Flow diagram of the whole black box. Detect similar cell subsets


STEP 3: *** NEED TO RUN ABBAS
- Summarize all probe set values before Quantile Normalize -> Abbas

STEP 7: MAYBE
- See if CIBERSORT can generate own gene expression signature matrix with differential expression file (4 cell lines, no tumor content, no noise)
-- Or is this CELL LINES?

STEP 10:
- Check normal distribution etc.

STEP 14:
- Run CIBERSORT and LLSR with a signature matrix with random genes
-- Generate heatmap
- Write about how to run the blackbox



1. voting script (black box)
2. noise function
3. implementing a real life data sets
4. what's going on with cibersort (lm22, osv..)
-- need some kind of benchmarking parameter for deciding what's the correct value.



- Why does CIBERSORT outperform LLSR in finding coefficients, but is identical in estimating a mixture?



MELANOMA	(0=alive, 1=dead)	overall survival (days)	stage	Naive	PD1high	PD1low	P-value	Pearson correlation:
MM01:	1	373	IV	0.4594945321	0	0.5405054679	0.07	0.4758611321
MM02:	1	181	IV	0	0.3403961989	0.6596038011	0.14	0.2460971802
MM03: 	1	436	IV	0	0.5676671092	0.4323328908	0.26	0.1659574175
MM04: 	1	82	IV	0	0	1	0.19	0.1995655002
MM06: 	1	646	IV	0	0.679970203	0.320029797	0.33	0.0873746836
MM08: 	1	114	IV	0.1086764935	0	0.8913235065	0.27	0.1350769588
MM09: 	1	322	IV	0	0.2726232969	0.7273767031	0.35	0.0770201858
MM10: 	1	46	IV	0	0.2750421496	0.7249578504	0.16	0.2197375369
MM11: 	0	3509	IV	0	0.5949865053	0.4050134947	0.27	0.1362907871
MM12: 	1	65	IV	0	0.1173241742	0.8826758258	0.29	0.1145626473
MM13: 	1	14	IV	0	0.2165008187	0.7834991813	0.13	0.2532193057
MM14: 	1	27	IV	0	0	1	0.26	0.1641738217
MM16: 	-	-	III	0	0.3262504853	0.6737495147	0.3	0.111281551
MM17: 	1	45	IV	0	0.336105956	0.663894044	0.26	0.1509522016
MM18: 	1	10	IV	0.0761666551	0.076007959	0.847825386	0.24	0.172416377
MM19: 	0	2711	IV	0.0853480095	0	0.9146519905	0.44	0.0449877881
MM20: 	1	32	IV	0	0.2627229104	0.7372770896	0.27	0.1464611024
MM21: 	1	55	IV	0	0.2700054525	0.7299945475	0.24	0.171494818
MM22: 	1	91	IV	0.0622041537	0	0.9377958463	0.24	0.1696885983
MM24: 	1	804	IV	0	0.5390827481	0.4609172519	0.32	0.0914756437
MM25: 	1	316	IV	0	0.5358590217	0.4641409783	0.24	0.1752425809
MM27: 	1	25	IV	0	0.1274545585	0.8725454415	0.17	0.2183574284
MM30: 	1	316	IV	0.0377667275	0.1714437872	0.7907894853	0.3	0.105898664
MM31: 	1	50	IV	0	0	1	0.14	0.2461725752
MM34: 	1	156	IV	0.0966851511	0.2445562176	0.6587586312	0.16	0.2281234168
MM37: 	1	219	IV	0	0.7960836911	0.2039163089	0.16	0.2391291788
MM38: 	1	266	IV	0.1730497815	0.3615576082	0.4653926103	0.27	0.1292995149
MM40: 	1	1075	IV	0.0381692411	0.7110708691	0.2507598898	0.23	0.1817549893
MM41: 	1	201	IV	0	0.7255314629	0.2744685371	0.18	0.2089078236
MM42: 	1	247	IV	0.0985626511	0.6564064133	0.2450309356	0.26	0.1606022193
MM43: 	1	414	IV	0	0.5949904077	0.4050095923	0.26	0.1640766227
MM44: 	1	108	IV	0	0.3924367936	0.6075632064	0.26	0.1659149409
MM45: 	-	-	III	0.7106443781	0	0.2893556219	0.16	0.2208870858
MM47: 	1	281	IV	0.0688971877	0	0.9311028123	0.46	0.0198592779
MM50: 	1	221	IV	0.1123939307	0.2810332236	0.6065728457	0.27	0.1484903004
MM51: 	1	102	IV	0	0.4596305215	0.5403694785	0.45	0.0364810096
MM52: 	1	301	IV	0.1153984564	0	0.8846015436	0.27	0.1482067247
MM53: 	1	64	IV	0.0065518856	0.188425702	0.8050224124	0.16	0.2257336918
MM55: 	1	375	IV	0.0849560104	0	0.9150439896	0.27	0.1353342295
MM57: 	1	218	IV	0	0.6168449235	0.3831550765	0.27	0.1196217527
MM58: 	1	1478	IV	0.1301717791	0.0697731896	0.8000550313	0.3	0.1016530304
MM60: 	1	13	IV	0.080603903	0	0.919396097	0.26	0.160075298
MM61: 	1	254	IV	0.011467179	0.4480139509	0.5405188701	0.16	0.2219097323
MM64: 	1	16	IV	0	0.1333061993	0.8666938007	0.36	0.0674091917
MM68: 	1	430	IV	0	0.8308647279	0.1691352721	0.26	0.1603068861
MM71: 	1	63	IV	0.0147182323	0.1105076248	0.8747741428	0.3	0.1012078613
MM73: 	0	1198	IV	0	0.2952294729	0.7047705271	0.27	0.1309843691
MM78: 	-	-	III	0.3002749297	0	0.6997250703	0.19	0.1975131299
MM80: 	0	927	IV	0	0.5437878833	0.4562121167	0.12	0.271716495
MM81: 	1	325	IV	0.0646416245	0	0.9353583755	0.35	0.076524994
MM82: 	1	44	IV	0.1473448206	0.6494261537	0.2032290257	0.04	0.6759339159
MM83: 	0	895	IV	0	0.6351325358	0.3648674642	0.27	0.1238117545
MM86: 	0	836	IV	0.8698781511	0	0.1301218489	0.24	0.1777512473
MM88: 	0	786	IV	0.0561692741	0.7501515607	0.1936791652	0.23	0.1852080597
MM93: 	1	244	IV	0	0.5207362621	0.4792637379	0.16	0.2290440437
MM94: 	1	78	IV	0	0.3458252885	0.6541747115	0.29	0.1155512709
MM95: 	1	29	IV	0	0	1	0.52	-0.0118130521