
ABEL COMMANDS:
sbatch <file.slurm>
watch -n 2 squeue -u jorgenjr
scancel <job id>



FILE STRUCTURE:
Abbas:
- Abbas_HUGO (lsfit, simulation -> HUGO)
- Abbas_result (lsfit, simulation (probes))
- Abbas_result_tumor (lsfit, simulation (probes) with tumor cell line in signature matrix)
- LLSR_HUGO (lm, ran with simulation/HUGO_tumor)

analyze_result:
PICTURES:
- CIBERSORT_heatmap_probes_newnorm_20x20.png (probes, new Q-norm, tumor cell not in 'signature matrix')
- LLSR_heatmap_probes_allgenes_20x20.png (probes, new Q-norm, tumor cell not in 'combined cells', correlation calcuated with combined cells)
- LLSR_heatmap_probes_newnorm_20x20.png (probes, new Q-norm, tumor cell not in 'combined cells', correlation calculated with signature matrix)
- Raji_probes_A.png (probes, 70% tumor, tumor cell included, new Q-norm)
- Raji_probes_B.png (probes, 70% tumor, tumor cell included, new Q-norm)
- Raji_probes_C.png (probes, 70% tumor, tumor cell included, new Q-norm)
- Raji_probes_D.png (probes, 70% tumor, tumor cell included, new Q-norm)
- T-high_T-low_probes_new_norm_notumor_A.png (probes, no tumor, new Q-norm)
- T-high_T-low_probes_new_norm_notumor_B.png (probes, no tumor, new Q-norm)
- T-high_T-low_probes_new_norm_notumor_C.png (probes, no tumor, new Q-norm)
- T-high_T-low_probes_new_norm_notumor_D.png (probes, no tumor, new Q-norm)
- T-high_probes_notumor_A.png (probes, no tumor, new Q-norm)
- T-high_probes_notumor_B.png (probes, no tumor, new Q-norm)
- T-high_probes_notumor_C.png (probes, no tumor, new Q-norm)
- T-high_probes_notumor_D.png (probes, no tumor, new Q-norm)

- mixA_notumor.png (probes, no tumor, new Q-norm)
- mixA_referencenorm.png (probes, no tumor, Q-norm reference matrix, new Q-norm, mixture without Q-norm with tumor)
- mixB_notumor.png (probes, no tumor, new Q-norm)
- mixB_referencenorm.png (probes, no tumor, Q-norm reference matrix, new Q-norm, mixture without Q-norm with tumor)
- mixC_notumor.png (probes, no tumor, new Q-norm)
- mixC_referencenorm.png (probes, no tumor, Q-norm reference matrix, new Q-norm, mixture without Q-norm with tumor)
- mixD_notumor.png (probes, no tumor, new Q-norm)
- mixD_referencenorm.png (probes, no tumor, Q-norm reference matrix, new Q-norm, mixture without Q-norm with tumor)



convert:
- simulation_hugo_unique_tumor (simulation -> HUGO)

output:
- CIBERSORT_HUGOfirst_tumor (HUGO -> simulation, ran with HUGO_tumor)
- CIBERSORT_randomsignatureQ_tumor (running CIBERSORT with random signature genes (quantile normalized), ran with HUGO_tumor mixture)
- CIBERSORT_randomsignature_tumor (running CIBERSORT with random signature genes, ran with HUGO_tumor mixture)
- CIBERSORT_result (simulation -> HUGO, ran with convert/simulation_hugo_unique_tumor mixture)
- CIBERSORT_result_tumor (simulation -> HUGO, ran with convert/simulation_hugo_unique_tumor mixture and signature matrix with tumor cell line)

simulation:
- HUGO_signaturegenes (only genes in ???/221_signature)
- HUGO_tumor (mixture -> HUGO -> simulation?)
- mixtures_with_tumor (simulation with probes)



PROGRAMMING
- Summarize all probe set values before Quantile Normalize -> Abbas
- Check normal distribution etc.

TEXT
- Flow diagram of the whole black box. Detect similar cell subsets


STEP 3: *** NEED TO RUN ABBAS
- Summarize all probe set values before Quantile Normalize -> Abbas

STEP 7: MAYBE
- See if CIBERSORT can generate own gene expression signature matrix with differential expression file (4 cell lines, no tumor content, no noise)
-- Or is this CELL LINES?

STEP 10:
- Check normal distribution etc.

STEP 14:
- Run CIBERSORT and LLSR with a signature matrix with random genes
-- Generate heatmap
- Write about how to run the blackbox



1. voting script (black box)
2. noise function
3. implementing a real life data sets
4. what's going on with cibersort (lm22, osv..)
-- need some kind of benchmarking parameter for deciding what's the correct value.

java -Xmx3g -Xms3g -jar CIBERSORT.jar -M ../Master_files/external/GSE22153_HUGO.txt -B ../Master_files/external/LM22.txt > ../Master_files/output/CIBERSORT_GSE22153_LM22

python3 /home/jorgen/Projects/Master/programming/simulation_CIBERSORT/simulation.py -c /home/jorgen/Projects/Master_files/external/GSE26495.txt -r

java -Xmx3g -Xms3g -jar CIBERSORT.jar -M ../Master_files/external/GSE22153_HUGO.txt -P ../Master_files/convert/reference_PD-1_HUGO -c ../Master_files/simulation/phenotype_classes_PD-1 > ../Master_files/output/CIBERSORT_PD-1_melanoma
java -Xmx3g -Xms3g -jar CIBERSORT.jar -M ../Master_files/convert/mixtures_hugo_tumor_0_0 -c ../Master_files/simulation/phenotype_classes_PD-1 -P ../Master_files/convert/reference_PD-1_HUGO > ../Master_files/output/CIBERSORT_PD-1_melanoma
java -Xmx3g -Xms3g -jar CIBERSORT.jar -M ../Master_files/external/GSE22153_HUGO.txt -c ../Master_files/simulation/phenotype_classes_PD-1 -P ../Master_files/external/GSE26495_HUGO.txt > ../Master_files/output/CIBERSORT_PD-1_melanoma

Rscript abbas.r ../../../Master_files/external/GSE26495_HUGO_quantile.txt ../../../Master_files/external/GSE22153_HUGO.txt ../../../Master_files/abbas/Abbas_GSE22153_HUGO_quantile